
//======================================================
- tmux 是什么？
Terminal Multiplexer，简单的说：它是一个多终端进程管理器，方便地在一个终端窗口下进行分屏。
那么问题来了：Mac自带的Iterm2很好用啊。既支持多标签，也支持窗体内部Panel的分割，为什么还要用tmux？其实，多标签和分割窗体只是tmux的部分功能。用tmux的主要原因是它提供了一个窗体组随时存储和恢复的功能。

主要两个功能
split窗口。可以在一个terminal下打开多个终端，也可以对当前屏幕进行各种split，即可以 同时打开多个显示范围更小的终端。
在使用SSH的环境下，避免网络不稳定，导致工作现场的丢失。想象以下场景， 你在执行一条命令的过程中，由于网络不稳定，SSH连接断开了。这个时候，你就不知道之前 的那条命令是否执行成功。如果此时你打开了很多文件，进入了较深层次的目录，由于网络 不稳定，SSH连接断开。重新连接以后，你又不得不重新打开那些文件，进入那个深层次的 目录。如果使用了tmux，重新连接以后，就可以直接回到原来的工作环境，不但提高了工作 效率，还降低了风险，增加了安全性。



安装：`brew install tmux`
配置：`vim ~/.tmux.conf`
- 基础概念：tmux -> session -> window -> pane

    Tmux可以管理多组会话
    一个会话（Session）可以包含多个窗口，一个窗口（Window）可以包含多个窗格（Pane）

插件包管理工具：
https://github.com/tmux-plugins/tpm

安装窗口保持插件：
http://zhaozhiming.github.io/blog/2015/11/22/save-and-restore-your-tmux/

也有人帮帮你做好了一个配置文件，用它的就可以啦：http://cenalulu.github.io/linux/tmux/

关于powerline，你可以先看下这篇文章：
http://cenalulu.github.io/linux/mac-powerline/
如果乱码，安装这个补丁：https://gist.github.com/qrush/1595572/raw/417a3fa36e35ca91d6d23ac961071094c26e5fad/Menlo-Powerline.otf


tmux的手册非常详尽，请输入man tmux后阅读。 

使用Tmux 的最好方式是使用会话的方式，这样你就可以以你想要的方式，将任务和应用组织到不同的会话中。如果你想改变一个会话，会话里面的任何工作都无须停止或者杀掉。让我们来看看这是怎么工作的。
让我们开始一个叫做”session”的会话，并且运行top命令

tmux new -s new session
top

Prefix-Command前置操作：所有下面介绍的快捷键，都必须以前置操作开始。tmux默认的前置操作是CTRL+b。例如，我们想要新建一个窗体，就需要先在键盘上摁下CTRL+b，松开后再摁下n键。

下面所有的prefix均代表CTRL+b

快捷键看这篇文章不错：
http://blog.kissdata.com/2014/07/29/tmux.html


- 快捷键：
	- Ctrl+b // 激活控制台；此时以下按键生效
	- 系统操作
		- $ 重命名当前的会话
		- ? // 列出所有快捷键；按q返回
		- d // 脱离当前会话；这样可以暂时返回Shell界面，输入tmux attach能够重新进入之前的会话
		- D // 选择要脱离的会话；在同时开启了多个会话时使用
		- Ctrl+z // 挂起当前会话
		- r // 强制重绘未脱离的会话
		- s // 选择并切换会话；在同时开启了多个会话时使用
		- : // 进入命令行模式；此时可以输入支持的命令，例如kill-server可以关闭服务器
		- [ // 进入复制模式；此时的操作与vi/emacs相同，按q/Esc退出
		- ~ // 列出提示信息缓存；其中包含了之前tmux返回的各种提示信息
		- L // 切换回上一次的会话
	- 窗口操作
		- c           创建新窗口
		- n           选择下一个窗口
		- p           选择前一个窗口
		- l           最近一次活跃窗口之间进行切换
		- 0~9         选择几号窗口
		- ,           重命名窗口
		- .           更改窗口的编号，但只能更改成未使用的编号，所以要交换窗口的话，得更改多次进行交换
		- &           关闭窗口
		- w           以菜单方式显示及选择窗口
		- f           在所有窗口中查找内容
	- 面板操作
		- ” // 将当前面板平分为上下两块
		- % // 将当前面板平分为左右两块
		- x // 关闭当前面板
		- ! // 将当前面板置于新窗口；即新建一个窗口，其中仅包含当前面板
		- Ctrl+方向键 // 以1个单元格为单位移动边缘以调整当前面板大小
		- Alt+方向键 // 以5个单元格为单位移动边缘以调整当前面板大小
		- Space // 在预置的面板布局中循环切换；依次包括even-horizontal、even-vertical、main-horizontal、main-vertical、tiled
		- q // 显示面板编号
		- o // 在当前窗口中选择下一面板
		- 方向键 // 移动光标以选择面板
		- { // 向前置换当前面板
		- } // 向后置换当前面板
		- Alt+o // 逆时针旋转当前窗口的面板
		- Ctrl+o // 顺时针旋转当前窗口的面板